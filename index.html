<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rats vs. New Yorkers: Who runs New York City?</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Unmute Rat Button (appears on page load) -->
    <button id="unmuteRat" class="unmute-rat-button" aria-label="Click to unmute and start interaction">
        <img src="assets/unmute-rat.png" alt="Click to unmute">
    </button>

    <!-- Mute Icon (appears after rat animation) -->
    <button id="muteToggle" class="mute-toggle hidden" aria-label="Toggle mute">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path class="volume-icon" d="M11 5L6 9H2V15H6L11 19V5Z" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round" />
            <g class="volume-waves">
                <path
                    d="M15.54 8.46C16.4774 9.39764 17.0039 10.6692 17.0039 11.995C17.0039 13.3208 16.4774 14.5924 15.54 15.53M19.07 4.93C20.9447 6.80528 21.9979 9.34836 21.9979 12C21.9979 14.6516 20.9447 17.1947 19.07 19.07"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <g class="mute-x">
                <line x1="16" y1="8" x2="22" y2="16" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <line x1="22" y1="8" x2="16" y2="16" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </g>
        </svg>
    </button>

    <!-- Mobile Message -->
    <div class="mobile-message">
        <p>Sorry, this story is best viewed on desktop for now</p>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-title-graphics" aria-hidden="true">
                <img src="assets/rats-title.svg" alt="" class="hero-title-img hero-title-img-rats">
                <img src="assets/vs.svg" alt="" class="hero-title-img hero-title-img-vs">
                <img src="assets/ny-title.svg" alt="" class="hero-title-img hero-title-img-ny">
            </div>
        </section>

        <!-- Intro Article Text -->
        <section class="intro">
            <div class="container">
                <p class="intro-text">
                    New York City has always been a battleground between its human residents and its most persistent
                    inhabitants: rats.
                    This ongoing struggle has shaped the city's history, infrastructure, and daily life in ways both
                    seen and unseen.
                    This ongoing struggle has shaped the city's history, infrastructure, and daily life in ways both
                    seen and unseen.

                    This ongoing struggle has shaped the city's history, infrastructure, and daily life in ways both
                    seen and unseen.

                    This ongoing struggle has shaped the city's history, infrastructure, and daily life in ways both
                    seen and unseen.

                    From the colonial era to the present day, the question remains: who really runs this city?
                </p>
            </div>



            <!-- Add these contestant images -->
            <div class="contestants">
                <img src="assets/rat.png" class="contestant-img" id="ratImage" alt="Rat">
                <img src="assets/ny.png" class="contestant-img" id="nyImage" alt="New Yorker">
            </div>
        </section>

        <!-- Scrollytelling Section -->
        <section class="scrolly">
            <!-- Sticky Tally Markers -->
            <div class="tally-container">
                <div class="tally-section tally-rats">
                    <div class="tally-image-container" id="ratImageContainer">
                        <img src="assets/rat.png" class="contestant-img-tally" id="ratImageTally" alt="Rat">
                    </div>
                    <h3>Rats</h3>
                    <div class="tally-marks" id="ratsTally">
                        <svg width="100" height="120" viewBox="0 0 100 120">
                            <!-- Tally marks will be added dynamically -->
                        </svg>
                    </div>
                    <div class="score" id="ratsScore">0</div>
                </div>

                <div class="tally-section tally-newyorkers">
                    <div class="tally-image-container" id="nyImageContainer">
                        <img src="assets/ny.png" class="contestant-img-tally" id="nyImageTally" alt="New Yorker">
                    </div>
                    <h3>New Yorkers</h3>
                    <div class="tally-marks" id="newyorkersTally">
                        <svg width="100" height="120" viewBox="0 0 100 120">
                            <!-- Tally marks will be added dynamically -->
                        </svg>
                    </div>
                    <div class="score" id="newyorkersScore">0</div>
                </div>
            </div>

            <!-- Timeline Container -->
            <div class="timeline-container">
                <svg id="timelineLine" class="timeline-line"></svg>

                <!-- Timeline Events -->
                <div class="timeline-events">
                    <!-- Event 1 -->
                    <div class="timeline-event step" data-step="1" data-winner="rats">
                        <div class="event-date-dot">
                            <div class="event-date">1624</div>
                            <div class="event-dot"></div>
                        </div>
                        <div class="event-card">
                            <div class="event-chip chip-rats">+1 for rats</div>
                            <h3 class="event-headline">Dutch Ships Bring First Rats</h3>
                            <p class="event-subtitle">The first rats arrive in New Amsterdam aboard Dutch trading ships.
                                Norway rats quickly establish themselves in the waterfront areas, beginning their
                                centuries-long colonization of Manhattan.</p>
                            <div class="event-visual">
                                <img src="assets/dumpster_02.png" alt="Dumpster" class="event-image">
                            </div>
                        </div>
                    </div>

                    <!-- Event 2 -->
                    <div class="timeline-event step" data-step="2" data-winner="newyorkers">
                        <div class="event-date-dot">
                            <div class="event-date">1842</div>
                            <div class="event-dot"></div>
                        </div>
                        <div class="event-card">
                            <div class="event-chip chip-newyorkers">+1 for New Yorkers</div>
                            <h3 class="event-headline">Croton Aqueduct Opens</h3>
                            <p class="event-subtitle">The Croton Aqueduct brings fresh water to Manhattan, allowing for
                                the city's first comprehensive sewer system. This engineering marvel helps control
                                disease and reduces rat habitats in some areas.</p>
                            <a href="#" class="event-read-more">Read more ></a>
                        </div>
                    </div>

                    <!-- Event 3 -->
                    <div class="timeline-event step" data-step="3" data-winner="rats">
                        <div class="event-date-dot">
                            <div class="event-date">1969</div>
                            <div class="event-dot"></div>
                        </div>
                        <div class="event-card">
                            <div class="event-chip chip-rats">+1 for rats</div>
                            <h3 class="event-headline">Sanitation Strike</h3>
                            <p class="event-subtitle">A nine-day sanitation strike leaves 100,000 tons of garbage on the
                                streets. Rat populations explode, establishing new colonies throughout the city and
                                demonstrating their resilience in urban chaos.</p>
                            <div class="event-visual">
                                <div class="flourish-embed flourish-scatter" data-src="visualisation/25799493">
                                    <script src="https://public.flourish.studio/resources/embed.js"></script>
                                    <noscript><img src="https://public.flourish.studio/visualisation/25799493/thumbnail"
                                            width="100%" alt="scatter visualization" /></noscript>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>
    <!-- End Main Content -->

    <!-- Rat Swarm Container -->
    <div id="ratSwarm" class="rat-swarm"></div>


    <!-- Scripts -->
    <script src="https://unpkg.com/scrollama@3.2.0/build/scrollama.min.js"></script>
    <script type="module" src="script.js"></script>
</body>

</html>